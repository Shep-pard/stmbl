Version 4
SHEET 1 1972 728
WIRE 1664 -48 1232 -48
WIRE 1936 -48 1744 -48
WIRE 1456 112 1456 96
WIRE 1136 128 1072 128
WIRE 1232 128 1232 -48
WIRE 1232 128 1136 128
WIRE 1424 128 1232 128
WIRE 1584 144 1488 144
WIRE 1808 144 1584 144
WIRE 1936 144 1936 -48
WIRE 1936 144 1888 144
WIRE 1968 144 1936 144
WIRE 1344 160 1344 80
WIRE 1392 160 1344 160
WIRE 1424 160 1392 160
WIRE 416 176 -240 176
WIRE 832 176 416 176
WIRE 608 192 304 192
WIRE 800 192 608 192
WIRE 1456 192 1456 176
WIRE 1072 208 1056 208
WIRE 1136 208 1072 208
WIRE 96 224 -64 224
WIRE 304 224 304 192
WIRE 304 224 96 224
WIRE 304 240 304 224
WIRE 480 240 448 240
WIRE 608 240 608 192
WIRE 1344 240 1344 160
WIRE 1392 272 1392 160
WIRE 1440 272 1392 272
WIRE 1584 272 1584 144
WIRE 1584 272 1520 272
WIRE 416 288 416 176
WIRE 368 304 368 240
WIRE 368 304 352 304
WIRE 384 304 368 304
WIRE 480 320 480 240
WIRE 480 320 448 320
WIRE 496 320 480 320
WIRE 528 320 496 320
WIRE 608 320 608 304
WIRE 736 320 688 320
WIRE 752 320 736 320
WIRE 304 336 304 320
WIRE 384 336 304 336
WIRE -240 352 -240 176
WIRE -64 352 -64 224
WIRE 112 352 48 352
WIRE 176 352 112 352
WIRE 208 352 176 352
WIRE 304 352 304 336
WIRE 304 352 288 352
WIRE 352 352 352 304
WIRE 640 352 592 352
WIRE 688 352 688 320
WIRE 688 352 640 352
WIRE 1344 352 1344 320
WIRE 592 368 592 352
WIRE -160 432 -240 432
WIRE -64 432 -160 432
WIRE 32 432 -64 432
WIRE 48 432 32 432
WIRE 112 432 48 432
WIRE 304 432 304 416
WIRE 304 432 112 432
WIRE 352 432 304 432
WIRE 416 432 416 352
WIRE 416 432 352 432
WIRE 592 432 416 432
WIRE 640 432 592 432
WIRE 768 432 640 432
WIRE 832 464 832 176
WIRE 832 464 416 464
WIRE 608 480 304 480
WIRE 800 480 800 192
WIRE 800 480 608 480
WIRE 304 528 304 480
WIRE 480 528 448 528
WIRE 608 528 608 480
WIRE 416 576 416 464
WIRE 368 592 368 528
WIRE 368 592 352 592
WIRE 384 592 368 592
WIRE 480 608 480 528
WIRE 480 608 448 608
WIRE 496 608 480 608
WIRE 528 608 496 608
WIRE 608 608 608 592
WIRE 736 608 688 608
WIRE 752 608 736 608
WIRE 304 624 304 608
WIRE 384 624 304 624
WIRE 176 640 176 352
WIRE 208 640 176 640
WIRE 304 640 304 624
WIRE 304 640 288 640
WIRE 352 640 352 592
WIRE 640 640 592 640
WIRE 688 640 688 608
WIRE 688 640 640 640
WIRE 592 656 592 640
WIRE -240 720 -240 432
WIRE 352 720 -240 720
WIRE 416 720 416 640
WIRE 416 720 352 720
WIRE 592 720 416 720
WIRE 640 720 592 720
WIRE 768 720 640 720
FLAG 32 432 0
FLAG 496 320 opout
FLAG 176 352 in
FLAG 96 224 3.3
FLAG -160 352 0V
FLAG 736 320 sig
FLAG 496 608 opoutl
FLAG 736 608 sigl
FLAG 1344 352 0
FLAG 1344 0 3.3
FLAG 1056 208 0
FLAG 1456 192 3.3
FLAG 1456 96 0
SYMBOL res 304 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 470
SYMBOL res 320 336 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 15k
SYMBOL voltage -64 336 R0
SYMATTR InstName V2
SYMATTR Value 3.3
SYMBOL voltage -160 336 R0
SYMATTR InstName V3
SYMATTR Value 0
SYMBOL voltage -240 336 R0
SYMATTR InstName V4
SYMATTR Value 15
SYMBOL res 512 336 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 624 336 R0
SYMATTR InstName R4
SYMATTR Value 2.4k
SYMBOL res 352 256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 7.5k
SYMBOL res 368 448 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 470
SYMBOL Opamps/opamp2 416 256 R0
SYMATTR InstName U1
SYMATTR Value lm358
SYMBOL cap 576 368 R0
SYMATTR InstName C1
SYMATTR Value 18p
SYMBOL current 48 352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value SINE(0 30 500 0 0)
SYMBOL res 128 448 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 0.003
SYMBOL res 592 336 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value 470
SYMBOL diode 624 304 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL res 304 624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 120
SYMBOL res 320 624 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 2.4k
SYMBOL res 512 624 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res 624 624 R0
SYMATTR InstName R12
SYMATTR Value 2.4k
SYMBOL res 352 544 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R13
SYMATTR Value 2.4k
SYMBOL res 368 736 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R14
SYMATTR Value 120
SYMBOL Opamps/opamp2 416 544 R0
SYMATTR InstName U2
SYMATTR Value lm358
SYMBOL cap 576 656 R0
SYMATTR InstName C2
SYMATTR Value 18p
SYMBOL res 592 624 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R15
SYMATTR Value 470
SYMBOL diode 624 592 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL cap 288 352 R0
SYMATTR InstName C3
SYMATTR Value 18p
SYMBOL Opamps/opamp2 1456 208 M180
SYMATTR InstName U3
SYMATTR Value lm358
SYMBOL res 1536 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 20k
SYMBOL res 1904 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 0
SYMBOL res 1760 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 100Meg
SYMBOL res 1360 96 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R19
SYMATTR Value 20k
SYMBOL res 1360 336 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName 20k
SYMATTR Value 20k
SYMBOL current 1072 128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I2
SYMATTR Value SINE(0 30 500 0 0)
SYMBOL res 1152 224 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R21
SYMATTR Value 0.003
TEXT 320 104 Left 2 !.tran 0 2ms
TEXT 496 104 Left 2 !.include lm358.lib
TEXT 864 312 Left 2 ;+-21A
TEXT 872 616 Left 2 ;+-5A
